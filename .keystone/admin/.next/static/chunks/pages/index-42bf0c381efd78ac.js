(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{85356:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(99258)}])},99258:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b}});var o=t(7896),n=t(2784),s=t(25445),i=t(38752),a=t(66759),l=t(31054);t(9747),t(43910),t(69378);var u=t(70814),c=t(10081),d=t(40794),g=t(91321),p=t(51511);t(17400),t(25631),t(5632),t(80487),t(40891),t(25273),t(80444),t(39097),t(55364),t(8999),t(38717),t(74002),t(17132),t(37668),t(51168),t(35976),t(10581),t(74176),t(97729);let h=e=>{let{listKey:r,count:t,hideCreate:o}=e,{colors:n,palette:l,radii:u,spacing:c}=(0,s.Fg)(),d=(0,g.sm)(r);return(0,s.tZ)("div",{css:{position:"relative"}},(0,s.tZ)(p.rU,{href:`/${d.path}${d.isSingleton?"/1":""}`,css:{backgroundColor:n.background,borderColor:n.border,borderRadius:u.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:c.large,textDecoration:"none",":hover":{borderColor:l.blue400},":hover h3":{textDecoration:"underline"}}},(0,s.tZ)("h3",{css:{margin:`0 0 ${c.small}px 0`}},d.label," "),d.isSingleton?null:"success"===t.type?(0,s.tZ)("span",{css:{color:n.foreground,textDecoration:"none"}},t.count," item",1!==t.count?"s":""):"error"===t.type?t.message:"loading"===t.type?(0,s.tZ)(a.xg,{label:`Loading count of ${d.plural}`,size:"small",tone:"passive"}):"No access"),!1===o&&!d.isSingleton&&(0,s.tZ)(m,{title:`Create ${d.singular}`,href:`/${d.path}/create`},(0,s.tZ)(i.p,{size:"large"}),(0,s.tZ)(s.TX,null,"Create ",d.singular)))},m=e=>{let r=(0,s.Fg)();return(0,s.tZ)(p.rU,(0,o.Z)({css:{alignItems:"center",backgroundColor:r.palette.neutral400,border:0,borderRadius:r.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:r.spacing.large,top:r.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{color:"white",backgroundColor:r.tones.positive.fill[0]}}},e))},b=()=>{let{adminMeta:{lists:e},visibleLists:r}=(0,g.jf)(),t=(0,n.useMemo)(()=>c.Ps`
    query {
      keystone {
        adminMeta {
          lists {
            key
            hideCreate
          }
        }
      }
      ${Object.values(e).filter(e=>!e.isSingleton).map(e=>`${e.key}: ${e.gqlNames.listQueryCountName}`).join("\n")}
    }`,[e]),{data:o,error:i}=(0,d.a)(t,{errorPolicy:"all"}),p=(0,l.m)(o,null==i?void 0:i.graphQLErrors);return(0,s.tZ)(u.P,{header:(0,s.tZ)(s.X6,{type:"h3"},"Dashboard")},"loading"===r.state?(0,s.tZ)(s.M5,{css:{height:`calc(100vh - ${u.H}px)`}},(0,s.tZ)(a.xg,{label:"Loading lists",size:"large",tone:"passive"})):(0,s.tZ)(s.gF,{as:"ul",gap:"large",paddingY:"xlarge",css:{paddingLeft:"0px",marginBottom:"0px"}},"error"===r.state?(0,s.tZ)("span",{css:{color:"red"}},r.error instanceof Error?r.error.message:r.error[0].message):Object.keys(e).map(e=>{var t,n;if(!r.lists.has(e))return null;let i=p.get(e);return(0,s.tZ)(h,{count:o?i.errors?{type:"error",message:i.errors[0].message}:{type:"success",count:o[e]}:{type:"loading"},hideCreate:null!==(t=null==o?void 0:null===(n=o.keystone.adminMeta.lists.find(r=>r.key===e))||void 0===n?void 0:n.hideCreate)&&void 0!==t&&t,key:e,listKey:e})})))}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=85356)}),_N_E=e.O()}]);